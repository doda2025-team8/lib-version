# lib-version

A simple Java library for retrieving the project's version at runtime. This library is designed to be embedded in other applications to make them "version-aware."

## Purpose

This library fetches the version string that was defined at build time. It integrates with Maven to automate the process, ensuring the version reported at runtime always matches the version in the `pom.xml`.

## Usage

To use this library, simply call the static method `VersionUtil.getVersion()`.

### Add as a Dependency

To include this library in your Maven project, add it as a dependency in your `pom.xml`. You will also need to configure your `pom.xml` to point to the GitHub Packages repository where this library is hosted.

**1. Configure Repository in `pom.xml`:**

```xml
<repositories>
    <repository>
        <id>github</id>
        <name>GitHub Packages</name>
        <url>https://maven.pkg.github.com/doda2025-team8/lib-version</url>
    </repository>
</repositories>
```

**2. Add Dependency:**

```xml
<dependencies>
    <dependency>
        <groupId>doda2025-team8</groupId>
        <artifactId>lib-version</artifactId>
        <version>THE_VERSION_YOU_WANT</version> <!-- e.g., 1.0.2 -->
    </dependency>
</dependencies>
```

### Get the Version in Your Code

Once the dependency is added, you can get the version string as follows:

```java
import doda25team8.version.VersionUtil;

public class MyApp {
    public static void main(String[] args) {
        String appVersion = VersionUtil.getVersion();
        System.out.println("Running version: " + appVersion);
        // Example Output: "Running version: 1.0.2"
    }
}
```

If the version cannot be determined for any reason (e.g., when running in a development environment outside of a packaged JAR), the method will return the string `"DEV"`.

## How It Works

The `VersionUtil.getVersion()` method works by reading a `version.properties` file from the classpath.

1.  **`version.properties`:** This file is located in `src/main/resources` and contains a single line:
    ```properties
    version=${project.version}
    ```
2.  **Maven Resource Filtering:** The project's `pom.xml` is configured to use resource filtering. During the `process-resources` phase of the Maven build, Maven replaces the placeholder `${project.version}` with the actual `<version>` value from the `pom.xml` file.
3.  **Packaging:** The processed `version.properties` file (now containing the real version) is packaged into the final JAR.
4.  **Runtime:** At runtime, `VersionUtil.getVersion()` opens this packaged `version.properties` file, reads the `version` property, and returns its value.

## Versioning and Release Process

This repository uses a semantic versioning scheme and automates releases through GitHub Actions.

### Pre-releases

When code is pushed to any branch that is **not** `main`, a pre-release build is triggered.
-   A unique version is generated by combining the base version from `pom.xml`, the branch name, and a timestamp (e.g., `1.0.2-my-feature-20260105123456`).
-   A JAR with this pre-release version is built and deployed to GitHub Packages.
-   This allows for testing development versions without creating a formal release.

### Stable Releases

When code is merged or pushed into the `main` branch, a stable release is created automatically:
1.  The `-SNAPSHOT` suffix is removed from the version in `pom.xml` (e.g., `1.0.2-SNAPSHOT` becomes `1.0.2`).
2.  This change is committed.
3.  A stable release of the library is deployed to GitHub Packages.
4.  A Git tag is created for the release (e.g., `v1.0.2`).
5.  The version in `pom.xml` is automatically bumped to the next patch version with a `-SNAPSHOT` suffix (e.g., `1.0.3-SNAPSHOT`).
6.  This final change is committed and pushed back to `main`, preparing the repository for the next development cycle.
